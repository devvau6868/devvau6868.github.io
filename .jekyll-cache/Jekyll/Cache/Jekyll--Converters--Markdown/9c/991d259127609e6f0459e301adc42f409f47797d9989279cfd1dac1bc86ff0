I"<h2 id="mục-đích">Mục đích</h2>

<p>Tôi dự định quản lý tất cả các tệp cấu hình máy chủ với git để tôi có thể ghi lại các thay đổi cấu hình. Nhưng một câu hỏi là, làm thế nào để mọi người cộng tác? Thông tin cấu hình máy chủ rất nhạy cảm Nếu kho lưu trữ này bị rò rỉ, toàn bộ kiến ​​trúc máy chủ của công ty bị rò rỉ hoàn toàn. Kho lưu trữ này chỉ có thể được giải mã trên máy tính cục bộ của nhà phát triển Máy chủ lưu trữ kho lưu trữ từ xa không nên biết nội dung của tệp.</p>

<p>Giải pháp là kho lưu trữ git cục bộ được giải mã. Nội dung được mã hóa trong quá trình tải lên, khóa được lưu cục bộ và khóa có thể được chia sẻ với các nhà phát triển khác.</p>

<h3 id="xem-xét-một-số-giải-pháp">Xem xét một số giải pháp:</h3>

<ol>
  <li>
    <p><code class="highlighter-rouge">git-crypt</code>：Nguyên tắc là để thêm fiter mã hóa và khác biệt, nhưng chính thức nói rằng nó chỉ thích hợp để mã hóa một số tập tin, không phải cho mã hóa thư viện phiên bản đầy đủ. Một phần của mã hóa tập tin là rất dễ dàng để gây ra rò rỉ thông tin, nó phải được phiên bản đầy đủ của mã hóa thư viện là phù hợp.</p>
  </li>
  <li>
    <p>Loạt ‘’ sshfs<code class="highlighter-rouge">máy chủ từ xa và hệ thống file mã hóa '' encfs</code>: Thứ nhất, tải hệ thống với các tập tin từ xa ‘’ sshfs<code class="highlighter-rouge">, và sau đó tạo ra một hệ thống tập tin được mã hóa sử dụng ` 'encfs</code>. Tôi đoán mọi người không thể được giải quyết cùng lúc ‘’ điều kiện cạnh tranh trong tình hình push<code class="highlighter-rouge">và EncFS lỗ hổng bảo mật, cần phải tải hai tập tin trên hệ thống trước khi sử dụng '' push / pull</code>, nó không phải là rất thuận tiện.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">git-remote-gcryp</code>t sử dụng <code class="highlighter-rouge">gpg</code> để mã hóa từ xa. Nó phù hợp với mô hình dự kiến ​​của tôi, nhưng việc sử dụng <code class="highlighter-rouge">gpg</code> không đặc biệt thuận tiện cho việc cộng tác. Nhưng các phương pháp khác không hoạt động, chỉ có phương pháp này.</p>
  </li>
</ol>

<h4 id="cách-sử-dụng">Cách sử dụng</h4>

<h6 id="cài-đặt-git-remote-gcrypt-và-gnupg">Cài đặt git-remote-gcrypt và gnupg</h6>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get install git-remote-gcrypt gnupg
</code></pre></div></div>
<h6 id="tạo-khóa-gpg">Tạo khóa gpg</h6>
<p>Cần đặt tên người dùng, hộp thư, mô tả, v.v., không đặt thời gian hết hạn</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gpg --gen-key
</code></pre></div></div>
<h6 id="ghi-lại-id-của-khóa-được-tạo">Ghi lại ID của khóa được tạo</h6>

<p>Ví dụ, liberxue013 vào năm 2048R / liberxue013, 2048 đại diện cho số vòng mã hóa, nó càng không dễ dàng để crack</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gpg --list-keys
</code></pre></div></div>
<h6 id="tạo-một-kho-lưu-trữ-thử-nghiệm">Tạo một kho lưu trữ thử nghiệm</h6>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir test1 &amp;&amp; cd test1
git init .
echo "test" &gt; a.txt
git add . &amp;&amp; git ci -m "update"
</code></pre></div></div>
<h5 id="tạo-dự-án-thử-nghiệm">Tạo dự án thử nghiệm</h5>

<p>Tạo một dự án trên github của bạn, ví dụ: https://github.com/liberxue</p>
<h6 id="cấu-hình-kho-lưu-trữ-được-mã-hóa-từ-xa">Cấu hình kho lưu trữ được mã hóa từ xa</h6>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git remote add cryptremote gcrypt::git@github.com:liberxue/liberxue.git
</code></pre></div></div>
<h6 id="tốt-nhất-là-chỉ-định-khóa-nào-cần-mã-hóa">Tốt nhất là chỉ định khóa nào cần mã hóa.</h6>
<p>Bằng cách này, bạn có thể chia sẻ khóa này để người khác sử dụng.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git config remote.cryptremote.gcrypt-participants "liberxue013"
</code></pre></div></div>
<h6 id="push-từ-xa">push từ xa</h6>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git push cryptremote master
</code></pre></div></div>
<ul>
  <li>Truy cập kho lưu trữ từ xa, xem nội dung của tệp và thông tin trong cam kết, chúng có được mã hóa không?</li>
</ul>

<h2 id="cách-chia-sẻ-với-người-khác">Cách chia sẻ với người khác</h2>

<h5 id="key-để-chia-sẻ">Key để chia sẻ</h5>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gpg --export-secret-key -a "share@share.com" &gt; secretkey.asc
</code></pre></div></div>
<ul>
  <li>Chia sẻ secretkey.asc cho người khác Khi sao chép, hãy nhớ nén và mã hóa trước khi gửi.</li>
</ul>

<h6 id="được-nhập-từ-máy-tính-của-người-khác">Được nhập từ máy tính của người khác</h6>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gpg --import secretkey.asc
</code></pre></div></div>
<h6 id="tải-code-xuống">Tải code xuống</h6>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone gcrypt::git@github.com:liberxue/liberxue.git test2 // Test2 là git clone văn bản cục bộ
件名
</code></pre></div></div>
<h6 id="đồng-thời-chỉ-định-khóa-nào-cần-mã-hóa">Đồng thời chỉ định khóa nào cần mã hóa</h6>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git config remote.cryptremote.gcrypt-participants "liberxue013"

</code></pre></div></div>

<p>Bằng cách này, bạn có thể sử dụng <code class="highlighter-rouge">git</code> để quản lý một số thông tin cá nhân và cộng tác (chẳng hạn như cấu hình máy chủ), hoặc bạn có thể sử dụng github như một hệ thống điều khiển phiên bản riêng (thông điệp cam kết hoặc bản rõ)</p>
:ET